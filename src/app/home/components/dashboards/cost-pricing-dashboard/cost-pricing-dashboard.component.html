<div class="container">
    <h2>CPM Metrics Dashboard</h2>

    <div class="controls">
        <div class="control-group">
            <label for="viewSelect">Chart View:</label>
            <select id="viewSelect" [(ngModel)]="selectedView" (change)="updateChart()">
                <option value="all">All Metrics (Bar Chart)</option>
                <option value="single">Single Metric</option>
                <option value="comparison">Metric Comparison</option>
                <option value="sorted">Sorted by Value</option>
                <option value="scatter">Scatter Plot</option>
                <option value="line">Line Chart</option>
                <option value="pie">Pie Chart Distribution</option>
                <option value="heatmap">Heatmap Matrix</option>
                <option value="box">Box Plot Summary</option>
                <option value="radar">Radar Chart</option>
            </select>
        </div>

        <div class="control-group" *ngIf="selectedView === 'single' || selectedView === 'pie'">
            <label for="metricSelect">Select Metric:</label>
            <select id="metricSelect" [(ngModel)]="selectedMetric" (change)="updateChart()">
                <option value="minCPM">Min CPM</option>
                <option value="maxCPM">Max CPM</option>
                <option value="clearingPrice">Clearing Price</option>
                <option value="hCPM">Header CPM</option>
            </select>
        </div>

        <div class="control-group" *ngIf="selectedView === 'comparison'">
            <label for="comparisonSelect">Compare Metrics:</label>
            <select id="comparisonSelect" [(ngModel)]="selectedComparison" (change)="updateChart()">
                <option value="minmax">Min vs Max CPM</option>
                <option value="clearingh">Clearing Price vs Header CPM</option>
                <option value="maxh">Max CPM vs Header CPM</option>
            </select>
        </div>

        <div class="control-group" *ngIf="selectedView === 'sorted'">
            <label for="sortSelect">Sort by:</label>
            <select id="sortSelect" [(ngModel)]="selectedSort" (change)="updateChart()">
                <option value="minCPM">Min CPM</option>
                <option value="maxCPM">Max CPM</option>
                <option value="clearingPrice">Clearing Price</option>
                <option value="hCPM">Header CPM</option>
            </select>
        </div>

        <div class="control-group" *ngIf="selectedView === 'scatter'">
            <label for="scatterXSelect">X-Axis:</label>
            <select id="scatterXSelect" [(ngModel)]="scatterX" (change)="updateChart()">
                <option value="minCPM">Min CPM</option>
                <option value="maxCPM">Max CPM</option>
                <option value="clearingPrice">Clearing Price</option>
                <option value="hCPM">Header CPM</option>
            </select>
            <label for="scatterYSelect">Y-Axis:</label>
            <select id="scatterYSelect" [(ngModel)]="scatterY" (change)="updateChart()">
                <option value="maxCPM">Max CPM</option>
                <option value="hCPM">Header CPM</option>
                <option value="clearingPrice">Clearing Price</option>
                <option value="minCPM">Min CPM</option>
            </select>
        </div>
    </div>

    <div #chartContainer id="chart"></div>
    <div #legendContainer id="legend" class="legend"></div>
</div>